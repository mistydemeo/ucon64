.PHONY: all clean distclean install flc txtextract id3extract uninstall
CC=@CC@

CFLAGS=@CFLAGS@
LDFLAGS=@LDFLAGS@

OBJECTS=flc.o misc.o output.o extract.o sort.o getopt.o
OBJECTS_TXT=misc.o txtextract.o
OBJECTS_ID3=misc.o id3extract.o

all: flc txtextract id3extract

clean:
	rm -f $(OBJECTS) $(OBJECTS_TXT) $(OBJECTS_ID3) DEADJOE flc txtextract id3extract *~ */*~ */*/*~ *.core 

distclean: clean
	rm -f Makefile config.log config.status config.cache config.h

flc: $(OBJECTS)
	$(CC) -o $@ $(OBJECTS)  $(LDFLAGS)

txtextract: $(OBJECTS_TXT)
	$(CC) -o $@ $(OBJECTS_TXT)  $(LDFLAGS)

id3extract: $(OBJECTS_ID3)
	$(CC) -o $@ $(OBJECTS_ID3)  $(LDFLAGS)

install:
	./install.sh

uninstall:
	rm -f /usr/local/bin/flc
	rm -f /usr/local/bin/txtextract
	rm -f /usr/local/bin/id3extract

# Dependencies

# Most source files include these
FLC_STD_H=flc.h misc.h config.h

getopt.o: getopt.h
misc.o: misc.h config.h
flc.o: extract.h getopt.h output.h sort.h $(FLC_STD_H)
extract.o: $(FLC_STD_H)
output.o: $(FLC_STD_H)
sort.o: $(FLC_STD_H)
txtextract.o: misc.h $(FLC_STD_H)
id3extract.o: misc.h $(FLC_STD_H)
