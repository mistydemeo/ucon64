.PHONY: all clean distclean install flc uninstall

#@DEFINE_ANSI_COLOR_MAKE@
#@DEFINE_DEBUG_MAKE@

prefix=@prefix@
exec_prefix=@exec_prefix@
includedir=@includedir@
libdir=@libdir@

INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@
#RANLIB=@RANLIB@

CC=@CC@
CFLAGS=-I. -Wall -W -O3 @DEFS@
LDFLAGS=-s

OBJECTS=file.o flc.o flc_misc.o format/txt.o format/met.o format/id3.o format/custom.o \
	getopt.o getopt2.o misc.o property.o rmdir2.o

all: flc

clean:
	rm -f $(OBJECTS) DEADJOE flc *~ */*~ */*/*~ *.core 

distclean: clean
	rm -f Makefile config.log config.status config.cache config.h

flc: $(OBJECTS)
	$(CC) -o $@ $(OBJECTS)  $(LDFLAGS)

install:
	cp flc $(prefix)/bin

uninstall:
	rm -f $(prefix)/bin/flc

# Dependencies

# Most source files include these
FLC_STD_H=flc.h config.h format/format.h

file.o: misc.h
flc.o: flc_misc.h getopt.h $(FLC_STD_H)
flc_misc.o: $(FLC_STD_H)
fornat/format.o: $(FLC_STD_H)
format/txt.o: format/txt.h $(FLC_STD_H)
format/met.o: format/met.h $(FLC_STD_H)
format/id3.o: format/id3.h $(FLC_STD_H)
format/custom.o: format/custom.h $(FLC_STD_H)
getopt.o: getopt.h
getopt2.o: getopt2.h
misc.o: misc.h
property.o: property.h
rmdir2.o: rmdir2.h
