.PHONY: all clean distclean install flc txtextract id3extract metextract uninstall

#@DEFINE_ANSI_COLOR_MAKE@
#@DEFINE_DEBUG_MAKE@

prefix=@prefix@
exec_prefix=@exec_prefix@
includedir=@includedir@
libdir=@libdir@

INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@
#RANLIB=@RANLIB@


CC=@CC@
CFLAGS=-I. -Wall -W -O3 @DEFS@
LDFLAGS=-s

OBJECTS=flc.o getopt.o misc.o flc_misc.o rmdir2.o format/format.o \
	format/f_txt.o format/f_met.o format/f_id3.o format/f_other.o

all: flc

clean:
	rm -f $(OBJECTS) DEADJOE flc *~ */*~ */*/*~ *.core 

distclean: clean
	rm -f Makefile config.log config.status config.cache config.h

flc: $(OBJECTS)
	$(CC) -o $@ $(OBJECTS)  $(LDFLAGS)

install:
	cp flc $(prefix)/bin

uninstall:
	rm -f $(prefix)/bin/flc
	rm -f $(prefix)/bin/txtextract
	rm -f $(prefix)/bin/id3extract
	rm -f $(prefix)/bin/metextract

# Dependencies

# Most source files include these
FLC_STD_H=flc.h misc.h config.h format/format.h

getopt.o: getopt.h
misc.o: misc.h config.h
flc.o: flc_misc.h getopt.h $(FLC_STD_H)
flc_misc.o: $(FLC_STD_H)
fornat/format.o: $(FLC_STD_H)
format/f_txt.o: format/f_txt.h $(FLC_STD_H)
format/f_met.o: format/f_met.h $(FLC_STD_H)
format/f_id3.o: format/f_id3.h $(FLC_STD_H)
format/f_other.o: format/f_other.h $(FLC_STD_H)
rmdir2.o: rmdir2.h
